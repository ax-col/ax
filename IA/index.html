<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Mobile Assistant</title>
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4f46e5">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- TensorFlow.js y Universal Sentence Encoder -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@latest"></script>
</head>
<body>
    <div id="app">
        <header>
            <h1>ğŸ§  AI Assistant</h1>
            <div id="connection-status">ğŸŸ¢ Online</div>
        </header>
        
        <div id="chat-container">
            <!-- Mensajes aparecerÃ¡n aquÃ­ -->
        </div>
        
        <div class="input-area">
            <input type="text" id="user-input" placeholder="Escribe tu pregunta..." autocomplete="off">
            <button id="send-btn">â¤</button>
        </div>
    </div>
    
    <!-- BotÃ³n para aÃ±adir conocimiento -->
    <button id="add-knowledge-btn" class="add-knowledge-btn" title="AÃ±adir conocimiento">
        +
    </button>
    
    <!-- BotÃ³n de configuraciÃ³n de APIs -->
<button id="api-config-btn" title="Configurar APIs" style="
    position: fixed;
    bottom: 100px;
    left: 20px;
    background: #8b5cf6;
    color: white;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
    z-index: 100;
">ğŸ”§</button>
    
    <!-- Scripts -->
    <script src="online-offline.js"></script>
    <!-- database.js temporalmente comentado por problemas -->
    <!-- <script src="database.js"></script> -->
    <script src="app.js"></script>
    
    <script>
        // Registrar Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
        
        // BotÃ³n para aÃ±adir conocimiento manualmente
        document.getElementById('add-knowledge-btn').addEventListener('click', async () => {
            const text = prompt('Introduce nuevo conocimiento:');
            const category = prompt('CategorÃ­a (IA, tecnologia, programacion, etc):') || 'general';
            
            if (text && window.aiAssistant) {
                const success = await window.aiAssistant.addToKnowledgeBase(text, category);
                alert(success ? 'âœ… Conocimiento aÃ±adido!' : 'âŒ Error al aÃ±adir');
            }
        });
    
    </script>
    
    <!-- Botones de aprendizaje automÃ¡tico -->
<div id="learning-buttons" style="position: fixed; bottom: 160px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 100;">
    <button id="learn-wikipedia" title="Aprender de Wikipedia" style="background: #3b82f6; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 20px; cursor: pointer; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);">W</button>
    <button id="learn-news" title="Aprender noticias" style="background: #ef4444; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 20px; cursor: pointer; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);">N</button>
    <button id="learn-web" title="Buscar en la web" style="background: #10b981; color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 20px; cursor: pointer; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);">ğŸŒ</button>
</div>
    
</body>
</html>